{"swagger":"2.0","info":{"title":"","version":"0.2"},"host":"localhost:80","basePath":"/api","consumes":["text/plain","application/json"],"produces":["application/json","application/xml","application/gob"],"paths":{"/GET /orders/{number}":{"get":{"tags":["accrual"],"summary":"GetOrder accrual","operationId":"accrual#GetOrder","parameters":[{"name":"number","in":"path","required":true,"type":"string"}],"responses":{"200":{"description":"OK response.","schema":{"$ref":"#/definitions/GetOrderResult"}},"500":{"description":"Internal Server Error response."}},"schemes":["http"]}},"/user/balance":{"get":{"tags":["balance"],"summary":"GetUserBalance balance","description":"Get user balance","operationId":"balance#GetUserBalance","parameters":[{"name":"Authorization","in":"header","description":"A JWT token used to authenticate a request","required":true,"type":"string"}],"responses":{"200":{"description":"OK response.","schema":{"$ref":"#/definitions/BalanceGetUserBalanceResponseBody","required":["current","withdrawn"]}},"401":{"description":"Missing or empty Authorization header","headers":{"goa-attribute-fault":{"description":"Is the error a server-side fault?","type":"boolean"},"goa-attribute-id":{"description":"ID is a unique identifier for this particular occurrence of the problem.","type":"string"},"goa-attribute-message":{"description":"Message is a human-readable explanation specific to this occurrence of the problem.","type":"string"},"goa-attribute-name":{"description":"Name is the name of this class of errors.","type":"string"},"goa-attribute-temporary":{"description":"Is the error temporary?","type":"boolean"},"goa-attribute-timeout":{"description":"Is the error a timeout?","type":"boolean"}}},"500":{"description":"Internal Server Error response."}},"schemes":["http"],"security":[{"jwt_header_Authorization":null}]}},"/user/balance/withdraw":{"post":{"tags":["balance"],"summary":"WithdrawUserBalance balance","operationId":"balance#WithdrawUserBalance","parameters":[{"name":"Authorization","in":"header","description":"A JWT token used to authenticate a request","required":true,"type":"string"},{"name":"WithdrawUserBalanceRequestBody","in":"body","required":true,"schema":{"$ref":"#/definitions/BalanceWithdrawUserBalanceRequestBody","required":["order","sum"]}}],"responses":{"200":{"description":"OK response."},"401":{"description":"Missing or empty Authorization header","headers":{"goa-attribute-fault":{"description":"Is the error a server-side fault?","type":"boolean"},"goa-attribute-id":{"description":"ID is a unique identifier for this particular occurrence of the problem.","type":"string"},"goa-attribute-message":{"description":"Message is a human-readable explanation specific to this occurrence of the problem.","type":"string"},"goa-attribute-name":{"description":"Name is the name of this class of errors.","type":"string"},"goa-attribute-temporary":{"description":"Is the error temporary?","type":"boolean"},"goa-attribute-timeout":{"description":"Is the error a timeout?","type":"boolean"}}},"402":{"description":"Insufficient funds"},"422":{"description":"Invalid order number"},"500":{"description":"Internal Server Error response."}},"schemes":["http"],"security":[{"jwt_header_Authorization":null}]}},"/user/login":{"post":{"tags":["user"],"summary":"login user","operationId":"user#login","parameters":[{"name":"LoginRequestBody","in":"body","required":true,"schema":{"$ref":"#/definitions/LoginPassword","required":["login","password"]}}],"responses":{"200":{"description":"OK response.","headers":{"Authorization":{"description":"A JWT token used to authenticate a request","type":"string"}}},"400":{"description":"Bad Request response."},"401":{"description":"User is not authenticated"},"500":{"description":"Internal Server Error response."}},"schemes":["http"]}},"/user/orders":{"get":{"tags":["balance"],"summary":"ListUserOrder balance","description":"List user orders","operationId":"balance#ListUserOrder","parameters":[{"name":"Authorization","in":"header","description":"A JWT token used to authenticate a request","required":true,"type":"string"}],"responses":{"200":{"description":"OK response.","schema":{"type":"array","items":{"$ref":"#/definitions/Order"}}},"204":{"description":"No orders available"},"401":{"description":"Missing or empty Authorization header","headers":{"goa-attribute-fault":{"description":"Is the error a server-side fault?","type":"boolean"},"goa-attribute-id":{"description":"ID is a unique identifier for this particular occurrence of the problem.","type":"string"},"goa-attribute-message":{"description":"Message is a human-readable explanation specific to this occurrence of the problem.","type":"string"},"goa-attribute-name":{"description":"Name is the name of this class of errors.","type":"string"},"goa-attribute-temporary":{"description":"Is the error temporary?","type":"boolean"},"goa-attribute-timeout":{"description":"Is the error a timeout?","type":"boolean"}}},"500":{"description":"Internal Server Error response."}},"schemes":["http"],"security":[{"jwt_header_Authorization":null}]},"post":{"tags":["balance"],"summary":"UploadUserOrder balance","description":"Upload user order","operationId":"balance#UploadUserOrder","parameters":[{"name":"Authorization","in":"header","description":"A JWT token used to authenticate a request","required":true,"type":"string"},{"name":"string","in":"body","description":"Unique user order number","required":true,"schema":{"type":"string","pattern":"[1-9][0-9]*"}}],"responses":{"200":{"description":"The order has been accepted for processing before."},"202":{"description":"The order has been accepted for processing."},"400":{"description":"Bad Request response."},"401":{"description":"Missing or empty Authorization header","headers":{"goa-attribute-fault":{"description":"Is the error a server-side fault?","type":"boolean"},"goa-attribute-id":{"description":"ID is a unique identifier for this particular occurrence of the problem.","type":"string"},"goa-attribute-message":{"description":"Message is a human-readable explanation specific to this occurrence of the problem.","type":"string"},"goa-attribute-name":{"description":"Name is the name of this class of errors.","type":"string"},"goa-attribute-temporary":{"description":"Is the error temporary?","type":"boolean"},"goa-attribute-timeout":{"description":"Is the error a timeout?","type":"boolean"}}},"409":{"description":"The order belongs to another user"},"422":{"description":"Invalid order number"},"500":{"description":"Internal Server Error response."}},"schemes":["http"],"security":[{"jwt_header_Authorization":null}]}},"/user/register":{"post":{"tags":["user"],"summary":"register user","operationId":"user#register","parameters":[{"name":"RegisterRequestBody","in":"body","required":true,"schema":{"$ref":"#/definitions/LoginPassword","required":["login","password"]}}],"responses":{"200":{"description":"OK response.","headers":{"Authorization":{"description":"A JWT token used to authenticate a request","type":"string"}}},"400":{"description":"Bad Request response."},"409":{"description":"Login is taken already"},"500":{"description":"Internal Server Error response."}},"schemes":["http"]}}},"definitions":{"BalanceGetUserBalanceResponseBody":{"title":"BalanceGetUserBalanceResponseBody","type":"object","properties":{"current":{"type":"number","example":0.21885177407856155,"format":"double","minimum":0},"withdrawn":{"type":"number","example":0.2311765057275559,"format":"double","minimum":0}},"example":{"current":500.5,"withdrawn":42},"required":["current","withdrawn"]},"BalanceWithdrawUserBalanceRequestBody":{"title":"BalanceWithdrawUserBalanceRequestBody","type":"object","properties":{"order":{"type":"string","example":"73","pattern":"[1-9][0-9]*"},"sum":{"type":"number","example":0.3143055584652567,"format":"double","exclusiveMinimum":0}},"example":{"order":"2377225624","sum":751},"required":["order","sum"]},"GetOrderResult":{"title":"GetOrderResult","type":"object","properties":{"accrual":{"type":"integer","example":14526632522361058921,"format":"int64"},"order":{"type":"string","example":"Porro assumenda ratione sit asperiores consequuntur."},"status":{"type":"string","example":"Ut et."}},"example":{"accrual":14520640612919729376,"order":"Distinctio magnam sint odit provident iure dolor.","status":"Eius cumque illum saepe."}},"GophermartError":{"title":"GophermartError","type":"object","example":{}},"LoginPassword":{"title":"LoginPassword","type":"object","properties":{"login":{"type":"string","example":"Magnam quae dignissimos veritatis."},"password":{"type":"string","example":"Magnam nihil."}},"example":{"login":"\u003clogin\u003e","password":"\u003cpassword\u003e"},"required":["login","password"]},"Order":{"title":"Order","type":"object","properties":{"accrual":{"type":"integer","example":753508728145150533,"format":"int64"},"number":{"type":"string","example":"545","pattern":"[1-9][0-9]*"},"status":{"type":"string","example":"PROCESSING","enum":["NEW","PROCESSING","INVALID","PROCESSED"]},"uploaded_at":{"type":"string","example":"2014-02-15T02:22:50Z","format":"date-time"}},"example":{"accrual":14303696236861458581,"number":"154","status":"PROCESSED","uploaded_at":"1987-01-04T22:48:33Z"},"required":["number","status","uploaded_at"]}},"securityDefinitions":{"jwt_header_Authorization":{"type":"apiKey","description":"Secures an endpoint by requiring a valid JWT token.","name":"Authorization","in":"header"}}}