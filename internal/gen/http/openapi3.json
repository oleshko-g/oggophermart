{"openapi":"3.0.3","info":{"title":"Goa API","version":"0.2"},"servers":[{"url":"http://localhost:80","description":"Default server for gophermart"}],"paths":{"/api/GET /orders/{number}":{"get":{"tags":["accrual"],"summary":"GetOrder accrual","operationId":"accrual#GetOrder","parameters":[{"name":"number","in":"path","required":true,"schema":{"type":"string","description":"Unique user order number","example":"9","pattern":"[1-9][0-9]*"},"example":"234"}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetOrderOKResponseBody"},"example":{"order":"4","status":"REGISTERED"}}}},"204":{"description":"No Content response."},"429":{"description":"The request rate limit has been exceeded: The request rate limit has been exceeded","headers":{"Retry-After":{"schema":{"type":"integer","example":4713163988026403398,"format":"int64","exclusiveMinimum":0},"example":5205344737650768963}},"content":{"text/plain":{"schema":{"$ref":"#/components/schemas/AccrualError2"},"example":{"message":"Est qui accusamus."}}}},"500":{"description":"Internal service error: Internal Server Error response."}}}},"/api/user/balance":{"get":{"tags":["balance"],"summary":"GetUserBalance balance","description":"Get user balance","operationId":"balance#GetUserBalance","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetUserBalanceResponseBody"},"example":{"current":500.5,"withdrawn":42}}}},"401":{"description":"missing_field: Missing or empty Authorization header","headers":{"goa-attribute-fault":{"description":"Is the error a server-side fault?","schema":{"type":"boolean","description":"Is the error a server-side fault?","example":false},"example":false},"goa-attribute-id":{"description":"ID is a unique identifier for this particular occurrence of the problem.","schema":{"type":"string","description":"ID is a unique identifier for this particular occurrence of the problem.","example":"123abc"},"example":"123abc"},"goa-attribute-message":{"description":"Message is a human-readable explanation specific to this occurrence of the problem.","schema":{"type":"string","description":"Message is a human-readable explanation specific to this occurrence of the problem.","example":"parameter 'p' must be an integer"},"example":"parameter 'p' must be an integer"},"goa-attribute-name":{"description":"Name is the name of this class of errors.","schema":{"type":"string","description":"Name is the name of this class of errors.","example":"bad_request"},"example":"bad_request"},"goa-attribute-temporary":{"description":"Is the error temporary?","schema":{"type":"boolean","description":"Is the error temporary?","example":false},"example":false},"goa-attribute-timeout":{"description":"Is the error a timeout?","schema":{"type":"boolean","description":"Is the error a timeout?","example":false},"example":true}}},"500":{"description":"Internal service error: Internal Server Error response."}},"security":[{"jwt_header_Authorization":[]}]}},"/api/user/balance/withdraw":{"post":{"tags":["balance"],"summary":"WithdrawUserBalance balance","operationId":"balance#WithdrawUserBalance","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WithdrawUserBalanceRequestBody"},"example":{"order":"2377225624","sum":751}}}},"responses":{"200":{"description":"OK response."},"401":{"description":"missing_field: Missing or empty Authorization header","headers":{"goa-attribute-fault":{"description":"Is the error a server-side fault?","schema":{"type":"boolean","description":"Is the error a server-side fault?","example":true},"example":false},"goa-attribute-id":{"description":"ID is a unique identifier for this particular occurrence of the problem.","schema":{"type":"string","description":"ID is a unique identifier for this particular occurrence of the problem.","example":"123abc"},"example":"123abc"},"goa-attribute-message":{"description":"Message is a human-readable explanation specific to this occurrence of the problem.","schema":{"type":"string","description":"Message is a human-readable explanation specific to this occurrence of the problem.","example":"parameter 'p' must be an integer"},"example":"parameter 'p' must be an integer"},"goa-attribute-name":{"description":"Name is the name of this class of errors.","schema":{"type":"string","description":"Name is the name of this class of errors.","example":"bad_request"},"example":"bad_request"},"goa-attribute-temporary":{"description":"Is the error temporary?","schema":{"type":"boolean","description":"Is the error temporary?","example":true},"example":false},"goa-attribute-timeout":{"description":"Is the error a timeout?","schema":{"type":"boolean","description":"Is the error a timeout?","example":false},"example":true}}},"402":{"description":"Insufficient funds: Insufficient funds"},"422":{"description":"Invalid order number: Invalid order number"},"500":{"description":"Internal service error: Internal Server Error response."}},"security":[{"jwt_header_Authorization":[]}]}},"/api/user/login":{"post":{"tags":["user"],"summary":"login user","operationId":"user#login","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginPassword"},"example":{"login":"\u003clogin\u003e","password":"\u003cpassword\u003e"}}}},"responses":{"200":{"description":"OK response.","headers":{"Authorization":{"description":"A JWT token used to authenticate a request","schema":{"type":"string","description":"A JWT token used to authenticate a request","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWUsImlhdCI6MTUxNjIzOTAyMn0.KMUFsIDTnFmyG3nMiGM6H9FNFUROf3wh7SmqJp-QV30"},"example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWUsImlhdCI6MTUxNjIzOTAyMn0.KMUFsIDTnFmyG3nMiGM6H9FNFUROf3wh7SmqJp-QV30"}}},"400":{"description":"Invalid input parameter: Bad Request response."},"401":{"description":"User is not authenticated: User is not authenticated"},"500":{"description":"Internal service error: Internal Server Error response."}}}},"/api/user/orders":{"get":{"tags":["balance"],"summary":"ListUserOrders balance","description":"List user orders","operationId":"balance#ListUserOrders","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Order"},"example":[{"accrual":500,"number":"9278923470","status":"PROCESSED","uploaded_at":"2020-12-10T15:15:45+03:00"},{"number":"12345678903","status":"PROCESSING","uploaded_at":"2020-12-10T15:12:01+03:00"},{"number":"346436439","status":"INVALID","uploaded_at":"2020-12-09T16:09:53+03:00"}]},"example":[{"accrual":500,"number":"9278923470","status":"PROCESSED","uploaded_at":"2020-12-10T15:15:45+03:00"},{"number":"12345678903","status":"PROCESSING","uploaded_at":"2020-12-10T15:12:01+03:00"},{"number":"346436439","status":"INVALID","uploaded_at":"2020-12-09T16:09:53+03:00"}]}}},"204":{"description":"No orders available"},"401":{"description":"missing_field: Missing or empty Authorization header","headers":{"goa-attribute-fault":{"description":"Is the error a server-side fault?","schema":{"type":"boolean","description":"Is the error a server-side fault?","example":false},"example":false},"goa-attribute-id":{"description":"ID is a unique identifier for this particular occurrence of the problem.","schema":{"type":"string","description":"ID is a unique identifier for this particular occurrence of the problem.","example":"123abc"},"example":"123abc"},"goa-attribute-message":{"description":"Message is a human-readable explanation specific to this occurrence of the problem.","schema":{"type":"string","description":"Message is a human-readable explanation specific to this occurrence of the problem.","example":"parameter 'p' must be an integer"},"example":"parameter 'p' must be an integer"},"goa-attribute-name":{"description":"Name is the name of this class of errors.","schema":{"type":"string","description":"Name is the name of this class of errors.","example":"bad_request"},"example":"bad_request"},"goa-attribute-temporary":{"description":"Is the error temporary?","schema":{"type":"boolean","description":"Is the error temporary?","example":false},"example":false},"goa-attribute-timeout":{"description":"Is the error a timeout?","schema":{"type":"boolean","description":"Is the error a timeout?","example":true},"example":false}}},"500":{"description":"Internal service error: Internal Server Error response."}},"security":[{"jwt_header_Authorization":[]}]},"post":{"tags":["balance"],"summary":"UploadUserOrder balance","description":"Upload user order","operationId":"balance#UploadUserOrder","requestBody":{"description":"Unique user order number","required":true,"content":{"application/json":{"schema":{"type":"string","description":"Unique user order number","example":"12345678903","pattern":"[1-9][0-9]*"},"example":"12345678903"}}},"responses":{"200":{"description":"The order has been accepted for processing before."},"202":{"description":"The order has been accepted for processing."},"400":{"description":"Invalid input parameter: Bad Request response."},"401":{"description":"missing_field: Missing or empty Authorization header","headers":{"goa-attribute-fault":{"description":"Is the error a server-side fault?","schema":{"type":"boolean","description":"Is the error a server-side fault?","example":true},"example":false},"goa-attribute-id":{"description":"ID is a unique identifier for this particular occurrence of the problem.","schema":{"type":"string","description":"ID is a unique identifier for this particular occurrence of the problem.","example":"123abc"},"example":"123abc"},"goa-attribute-message":{"description":"Message is a human-readable explanation specific to this occurrence of the problem.","schema":{"type":"string","description":"Message is a human-readable explanation specific to this occurrence of the problem.","example":"parameter 'p' must be an integer"},"example":"parameter 'p' must be an integer"},"goa-attribute-name":{"description":"Name is the name of this class of errors.","schema":{"type":"string","description":"Name is the name of this class of errors.","example":"bad_request"},"example":"bad_request"},"goa-attribute-temporary":{"description":"Is the error temporary?","schema":{"type":"boolean","description":"Is the error temporary?","example":false},"example":true},"goa-attribute-timeout":{"description":"Is the error a timeout?","schema":{"type":"boolean","description":"Is the error a timeout?","example":false},"example":false}}},"409":{"description":"The order belongs to another user: The order belongs to another user"},"422":{"description":"Invalid order number: Invalid order number"},"500":{"description":"Internal service error: Internal Server Error response."}},"security":[{"jwt_header_Authorization":[]}]}},"/api/user/register":{"post":{"tags":["user"],"summary":"register user","operationId":"user#register","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginPassword"},"example":{"login":"\u003clogin\u003e","password":"\u003cpassword\u003e"}}}},"responses":{"200":{"description":"OK response.","headers":{"Authorization":{"description":"A JWT token used to authenticate a request","schema":{"type":"string","description":"A JWT token used to authenticate a request","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWUsImlhdCI6MTUxNjIzOTAyMn0.KMUFsIDTnFmyG3nMiGM6H9FNFUROf3wh7SmqJp-QV30"},"example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWUsImlhdCI6MTUxNjIzOTAyMn0.KMUFsIDTnFmyG3nMiGM6H9FNFUROf3wh7SmqJp-QV30"}}},"400":{"description":"Invalid input parameter: Bad Request response."},"409":{"description":"Login is taken already: Login is taken already"},"500":{"description":"Internal service error: Internal Server Error response."}}}}},"components":{"schemas":{"AccrualError":{"type":"object","properties":{"message":{"type":"string","example":"Soluta dignissimos ipsa."},"retryAfter":{"type":"integer","example":8718001642331155758,"format":"int64","exclusiveMinimum":0}},"required":["retryAfter","message"]},"AccrualError2":{"type":"object","properties":{"message":{"type":"string","example":"Voluptatibus laudantium ut eum."}},"example":{"message":"Laudantium dolorem."},"required":["message"]},"GetOrderOKResponseBody":{"type":"object","properties":{"accrual":{"type":"number","example":0.8158778328797043,"format":"double","exclusiveMinimum":0},"order":{"type":"string","example":"9","pattern":"[1-9][0-9]*"},"status":{"type":"string","example":"PROCESSED","enum":["REGISTERED","INVALID","PROCESSING","PROCESSED"]}},"example":{"order":"4","status":"REGISTERED"},"required":["order","status"]},"GetOrderResult":{"type":"object","example":{}},"GetUserBalanceResponseBody":{"type":"object","properties":{"current":{"type":"number","example":0.72057620477551,"format":"double","minimum":0},"withdrawn":{"type":"number","example":0.7822559545972244,"format":"double","minimum":0}},"example":{"current":500.5,"withdrawn":42},"required":["current","withdrawn"]},"GophermartError":{"type":"object"},"JWTToken":{"type":"object","properties":{"authToken":{"type":"string","description":"A JWT token used to authenticate a request","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWUsImlhdCI6MTUxNjIzOTAyMn0.KMUFsIDTnFmyG3nMiGM6H9FNFUROf3wh7SmqJp-QV30"}},"example":{"authToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWUsImlhdCI6MTUxNjIzOTAyMn0.KMUFsIDTnFmyG3nMiGM6H9FNFUROf3wh7SmqJp-QV30"},"required":["authToken"]},"LoginPassword":{"type":"object","properties":{"login":{"type":"string","example":"Et id ad distinctio magnam sint odit."},"password":{"type":"string","example":"Iure dolor."}},"example":{"login":"\u003clogin\u003e","password":"\u003cpassword\u003e"},"required":["login","password"]},"Order":{"type":"object","properties":{"accrual":{"type":"integer","example":11239546530167864484,"format":"int64"},"number":{"type":"string","example":"8","pattern":"[1-9][0-9]*"},"status":{"type":"string","example":"INVALID","enum":["NEW","PROCESSING","INVALID","PROCESSED"]},"uploaded_at":{"type":"string","example":"1979-04-17T14:15:56Z","format":"date-time"}},"example":{"accrual":17293147444294344261,"number":"82","status":"PROCESSING","uploaded_at":"1995-08-08T15:28:45Z"},"required":["number","status","uploaded_at"]},"PostOrderResult":{"type":"object"},"WithdrawUserBalanceRequestBody":{"type":"object","properties":{"order":{"type":"string","example":"368","pattern":"[1-9][0-9]*"},"sum":{"type":"number","example":0.9580295743554528,"format":"double","exclusiveMinimum":0}},"example":{"order":"2377225624","sum":751},"required":["order","sum"]}},"securitySchemes":{"jwt_header_Authorization":{"type":"http","description":"Secures an endpoint by requiring a valid JWT token.","scheme":"bearer"}}},"tags":[{"name":"balance"},{"name":"user"},{"name":"accrual"}]}